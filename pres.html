<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>Phaser - Getting started</title>
	<script type="text/javascript" src="phaser.min.js"></script>
	<script type="text/javascript" src="jquery-1.11.0.min.js"></script>
	<script src="js/bootstrap.js"></script>
	<link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/portfolio-item.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<script type="text/javascript">

/* Creating The Game Variable */
var width = 1024;
var height = 768;
var game = new Phaser.Game(width, height, Phaser.AUTO, '', { preload: preload, create: create, update: update});
game.transparent = true;


/* Loading of assets goes here. */
function preload(){
	game.load.image('ground', 'assets/ground.png');
	game.load.image('player', 'assets/player.png');
}

/* Globals */
var style;
var interactive;
var presentation;
var started = false;

var textGroup;
var ground;
var player;

var worldCollisionGroup;

/* This functions serves for setting up initial variables. */
function create(){    
	addClassToCanvas(); /* Making sure this always fits inside the browser */
	style = { font: "Times New Roman", fill: "#2A2F35", align: "center" };
	
	textGroup = game.add.group();
	game.physics.startSystem(Phaser.Physics.P2JS);
	game.physics.p2.defaultRestitution = 0.8; 	

	interactive = ['I','N','T','E','R','A','C','T','I','V','E'];
	/* i n t e r a c t i v e */
	for(var i = 0; i < 11; i++){
		var text = game.add.text(30 + (i * 87), 5, interactive[i], style);
		text.fontSize = 60;
		textGroup.add(text);
	}

	presentation = ['P','R','E','S','E','N','T','A','T','I','O','N'];
	/* p r e s e n t a t i o n */
	for(var i = 0; i < 12; i++){
		var text = game.add.text(55  + (i * 75), 110, presentation[i], style);
		text.fontSize = 50;
		textGroup.add(text);
	}	
	
	ground = game.add.sprite(0, height, 'ground');
 	player = game.add.sprite(30, height - 180, 'player');

 	ground.width = width;
	ground.alpha = 1;
	player.alpha = 1;

	game.physics.p2.enable(player);
	game.physics.p2.enable(ground);

	game.add.existing(player);
	game.add.existing(ground);

	player.body.collideWorldBounds = true;
	ground.body.collideWorldBounds = true;
	ground.body.immovable = true;

	cursors = game.input.keyboard.createCursorKeys();
}

function update(){
	if(game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)){
		if(!started){
			started = true;
			game.add.tween(ground).to( { alpha: 1 }, 800, Phaser.Easing.None, true);
			game.add.tween(player).to( { alpha: 1 }, 800, Phaser.Easing.None, true);

			textGroup.forEach(function(item) {
				game.add.tween(item).to( { alpha: 0 }, 500, Phaser.Easing.None, true);
    		});
		}

		game.physics.arcade.collide(player, ground);
		player.body.velocity.x = 0;

		if(started){
			sprite.body.setZeroVelocity();

		    if (cursors.left.isDown){
		    	sprite.body.moveLeft(400);
		    }
		    else if (cursors.right.isDown){
		    	sprite.body.moveRight(400);
		    }
		    
		    if (cursors.up.isDown){
		    	sprite.body.moveUp(400);
		    }
		    else if (cursors.down.isDown){
		    	sprite.body.moveDown(400);
		    }
		}
	}
}

/* Making sure this always fits inside the browser */
function addClassToCanvas(){   
	$('canvas').addClass('img-responsive');



} 

</script>
</body>

